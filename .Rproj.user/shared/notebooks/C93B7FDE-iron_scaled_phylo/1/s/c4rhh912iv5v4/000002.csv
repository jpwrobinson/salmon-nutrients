"0",""
"0","focal<-tl %>% filter(nutrient == 'Iron') %>%"
"0","		select(nutrient, value, id_number, paper_id, species, family,Order, "
"0","					EnvTemp, demers_pelag, TL, Lmax, K, tm, BodyShapeI,"
"0","					source, form_clean, Habitat, pelagic, country_sampled,"
"0","					river_iron, soil_quality) %>%"
"0","    mutate(Lmax = log(Lmax), K = log(K), tm = log(tm)) %>% "
"0","    filter(value < 150)"
"0",""
"0","apply(focal %>% select(demers_pelag:Habitat), 2, function(x){sum(is.na(x))})"
"1","demers_pelag "
"1","          TL "
"1","        Lmax "
"1","           K "
"1","          tm "
"1","  BodyShapeI "
"1","      source "
"1","  form_clean "
"1","     Habitat "
"1","
"
"1","           0 "
"1","           0 "
"1","           0 "
"1","           0 "
"1","           0 "
"1","           0 "
"1","           0 "
"1","           0 "
"1","           0 "
"1","
"
"0","skim(focal)"
"1","── Data Summary ────────────────────────
"
"1","                          "
"1"," Values"
"1","
Name                      "
"1"," focal "
"1","
Number of rows            "
"1"," 307   "
"1","
Number of columns         "
"1"," 21    "
"1","
_______________________   "
"1","       "
"1","
Column type frequency:    "
"1","       "
"1","
  character               "
"1"," 5     "
"1","
  factor                  "
"1"," 8     "
"1","
  numeric                 "
"1"," 8     "
"1","
________________________  "
"1","       "
"1","
Group variables           "
"1"," None  "
"1","
"
"1","
── Variable type: character ────────────────────────────────────────────────────────────────────────────────────────────────"
"1","
"
"1","  skim_variable n_missing complete_rate   min   max empty n_unique whitespace"
"1","
"
"1","1 paper_id              0             1     5    16     0       41          0"
"1","
"
"1","2 species               0             1     9    28     0      134          0"
"1","
"
"1","3 EnvTemp               0             1     5    11     0        4          0"
"1","
"
"1","4 BodyShapeI            0             1     9    19     0        3          0"
"1","
"
"1","5 Habitat               0             1     8    10     0        3          0"
"1","
"
"1","
── Variable type: factor ───────────────────────────────────────────────────────────────────────────────────────────────────"
"1","
"
"1","  skim_variable   n_missing complete_rate ordered n_unique top_counts                         "
"1","
"
"1","1 nutrient                0             1 FALSE          1 Iro: 307, Cal: 0, Ome: 0, Pro: 0   "
"1","
"
"1","2 id_number               0             1 FALSE        307 A_1: 1, A_1: 1, A_1: 1, A_1: 1     "
"1","
"
"1","3 family                  0             1 FALSE         36 Cyp: 120, Sal: 21, Cha: 16, Clu: 16"
"1","
"
"1","4 Order                   0             1 FALSE         12 Cyp: 124, Per: 70, Sil: 44, Sal: 21"
"1","
"
"1","5 demers_pelag            0             1 FALSE          4 ben: 171, dem: 98, pel: 21, pel: 17"
"1","
"
"1","6 source                  0             1 FALSE          3 WoS: 117, Fio: 97, FAO: 93         "
"1","
"
"1","7 form_clean              0             1 FALSE          3 who: 167, mus: 136, not: 4, who: 0 "
"1","
"
"1","8 country_sampled         0             1 FALSE         19 Ban: 137, Ind: 41, Gre: 22, Pol: 20"
"1","
"
"1","
── Variable type: numeric ──────────────────────────────────────────────────────────────────────────────────────────────────"
"1","
"
"1","  skim_variable n_missing complete_rate   mean    sd      p0    p25    p50    p75  p100 hist "
"1","
"
"1","1 value                 0             1  2.34  4.36   0.0117  0.5    1      2.06  38.6  ▇▁▁▁▁"
"1","
"
"1","2 TL                    0             1  3.20  0.611  2       2.8    3.25   3.60   4.5  ▃▃▇▃▂"
"1","
"
"1","3 Lmax                  0             1  3.83  0.976  1.61    3.00   3.91   4.61   6.21 ▂▇▇▇▁"
"1","
"
"1","4 K                     0             1 -0.970 0.731 -2.66   -1.46  -1.11  -0.380  1.44 ▂▇▅▂▁"
"1","
"
"1","5 tm                    0             1  0.625 0.550 -0.626   0.236  0.612  0.991  2.03 ▂▅▇▆▁"
"1","
"
"1","6 pelagic               0             1  0.124 0.330  0       0      0      0      1    ▇▁▁▁▁"
"1","
"
"1","7 river_iron            0             1  2.43  4.64   0.2     0.2    0.2    1.39  12.8  ▇▁▁▁▂"
"1","
"
"1","8 soil_quality          0             1  1.55  0.353  1.06    1.40   1.40   1.67   2.63 ▃▇▂▁▁"
"1","
"
"0","## drop outliers"
"0","outlier.lims<-2*sd(focal$value) + mean(focal$value)"
"0","print(paste0('Dropping ', dim(focal[focal$value >= outlier.lims,])[1], ' large outliers above ', outlier.lims))"
"1","[1]"
"1"," ""Dropping 18 large outliers above 11.0631496896626"""
"1","
"
"0","focal<-focal %>% filter(value <= outlier.lims)"
"0","# "
"0","# drop 5 fish with values > 7, causing Pareto problems"
"0","focal<-focal %>% filter(value < 7)"
"0",""
"0","hist(focal$value)"
